{"ast":null,"code":"import React,{useState,useEffect}from'react';import{toast,ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import AdministradorService from'../../services/administradorService';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function CrearColegio(){const[nombre,setNombre]=useState('');const[direccion,setDireccion]=useState('');const[telefono,setTelefono]=useState('');const[directorRut,setDirectorRut]=useState('');const[directores,setDirectores]=useState([]);const[municipalidadId,setMunicipalidadId]=useState('');const[municipalidades,setMunicipalidades]=useState([]);const[errorMessage,setErrorMessage]=useState('');// Cargar municipalidades y directores disponibles\nuseEffect(()=>{const fetchMunicipalidades=async()=>{try{const response=await AdministradorService.obtenerMunicipalidades();setMunicipalidades(response);}catch(error){console.error(\"Error al obtener las municipalidades:\",error);setErrorMessage(\"No se pudieron cargar las municipalidades.\");}};fetchMunicipalidades();},[]);useEffect(()=>{const fetchDirectores=async()=>{try{const response=await AdministradorService.obtenerDirectoresSinColegio();setDirectores(response);}catch(error){console.error(\"Error al obtener los directores:\",error);setErrorMessage(\"No se pudieron cargar los directores.\");}};fetchDirectores();},[]);const handleSubmit=async event=>{event.preventDefault();try{await AdministradorService.crearColegio({nombre,direccion,telefono,directorRut,municipalidadId});setNombre('');setDireccion('');setTelefono('');setDirectorRut('');setMunicipalidadId('');toast.success('¡Colegio creado con éxito!',{position:\"top-right\",autoClose:3000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}catch(error){console.error(\"Error al crear el colegio:\",error);toast.error('Error al crear el colegio. Inténtalo nuevamente.',{position:\"top-right\",autoClose:3000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nombre\",children:\"Nombre:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"nombre\",value:nombre,onChange:e=>setNombre(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"direccion\",children:\"Direcci\\xF3n:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"direccion\",value:direccion,onChange:e=>setDireccion(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"telefono\",children:\"Tel\\xE9fono:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"telefono\",value:telefono,onChange:e=>setTelefono(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"director\",children:\"Director:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"director\",value:directorRut,onChange:e=>setDirectorRut(e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona un director\"}),directores.map(director=>/*#__PURE__*/_jsx(\"option\",{value:director.rut,children:director.nombre},director.rut))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"municipalidad\",children:\"Municipalidad:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"municipalidad\",value:municipalidadId,onChange:e=>setMunicipalidadId(e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona una municipalidad\"}),municipalidades.map(municipalidad=>/*#__PURE__*/_jsx(\"option\",{value:municipalidad.id,children:municipalidad.nombre},municipalidad.id))]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Crear Colegio\"})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});}export default CrearColegio;","map":{"version":3,"names":["React","useState","useEffect","toast","ToastContainer","AdministradorService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CrearColegio","nombre","setNombre","direccion","setDireccion","telefono","setTelefono","directorRut","setDirectorRut","directores","setDirectores","municipalidadId","setMunicipalidadId","municipalidades","setMunicipalidades","errorMessage","setErrorMessage","fetchMunicipalidades","response","obtenerMunicipalidades","error","console","fetchDirectores","obtenerDirectoresSinColegio","handleSubmit","event","preventDefault","crearColegio","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","children","onSubmit","className","htmlFor","type","id","value","onChange","e","target","required","map","director","rut","municipalidad"],"sources":["C:/Users/aggro/OneDrive/Desktop/Nueva carpeta (3)/LMS/lms_renca_frontend/src/components/municipalidad/CrearColegio.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport AdministradorService from '../../services/administradorService';\r\n\r\nfunction CrearColegio() {\r\n    const [nombre, setNombre] = useState('');\r\n    const [direccion, setDireccion] = useState('');\r\n    const [telefono, setTelefono] = useState('');\r\n    const [directorRut, setDirectorRut] = useState('');\r\n    const [directores, setDirectores] = useState([]);\r\n    const [municipalidadId, setMunicipalidadId] = useState('');\r\n    const [municipalidades, setMunicipalidades] = useState([]);\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n\r\n    // Cargar municipalidades y directores disponibles\r\n    useEffect(() => {\r\n        const fetchMunicipalidades = async () => {\r\n            try {\r\n                const response = await AdministradorService.obtenerMunicipalidades();\r\n                setMunicipalidades(response);\r\n            } catch (error) {\r\n                console.error(\"Error al obtener las municipalidades:\", error);\r\n                setErrorMessage(\"No se pudieron cargar las municipalidades.\");\r\n            }\r\n        };\r\n        fetchMunicipalidades();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const fetchDirectores = async () => {\r\n            try {\r\n                const response = await AdministradorService.obtenerDirectoresSinColegio();\r\n                setDirectores(response);\r\n            } catch (error) {\r\n                console.error(\"Error al obtener los directores:\", error);\r\n                setErrorMessage(\"No se pudieron cargar los directores.\");\r\n            }\r\n        };\r\n        fetchDirectores();\r\n    }, []);\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        try {\r\n            await AdministradorService.crearColegio({\r\n                nombre,\r\n                direccion,\r\n                telefono,\r\n                directorRut,\r\n                municipalidadId\r\n            });\r\n            \r\n            setNombre('');\r\n            setDireccion('');\r\n            setTelefono('');\r\n            setDirectorRut('');\r\n            setMunicipalidadId('');\r\n            toast.success('¡Colegio creado con éxito!', {\r\n                position: \"top-right\",\r\n                autoClose: 3000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n            });\r\n        } catch (error) {\r\n            console.error(\"Error al crear el colegio:\", error);\r\n            toast.error('Error al crear el colegio. Inténtalo nuevamente.', {\r\n                position: \"top-right\",\r\n                autoClose: 3000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n            });\r\n        }\r\n    };\r\n    \r\n\r\n    return (\r\n        <>\r\n            <form onSubmit={handleSubmit}>\r\n                {errorMessage && <p className=\"error-message\">{errorMessage}</p>}\r\n                <div>\r\n                    <label htmlFor=\"nombre\">Nombre:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"nombre\"\r\n                        value={nombre}\r\n                        onChange={(e) => setNombre(e.target.value)}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label htmlFor=\"direccion\">Dirección:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"direccion\"\r\n                        value={direccion}\r\n                        onChange={(e) => setDireccion(e.target.value)}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label htmlFor=\"telefono\">Teléfono:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"telefono\"\r\n                        value={telefono}\r\n                        onChange={(e) => setTelefono(e.target.value)}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label htmlFor=\"director\">Director:</label>\r\n                    <select\r\n                        id=\"director\"\r\n                        value={directorRut}\r\n                        onChange={(e) => setDirectorRut(e.target.value)}\r\n                        required\r\n                    >\r\n                        <option value=\"\">Selecciona un director</option>\r\n                        {directores.map((director) => (\r\n                            <option key={director.rut} value={director.rut}>\r\n                                {director.nombre}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n                <div>\r\n                    <label htmlFor=\"municipalidad\">Municipalidad:</label>\r\n                    <select\r\n                        id=\"municipalidad\"\r\n                        value={municipalidadId}\r\n                        onChange={(e) => setMunicipalidadId(e.target.value)}\r\n                        required\r\n                    >\r\n                        <option value=\"\">Selecciona una municipalidad</option>\r\n                        {municipalidades.map((municipalidad) => (\r\n                            <option key={municipalidad.id} value={municipalidad.id}>\r\n                                {municipalidad.nombre}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n                <button type=\"submit\">Crear Colegio</button>\r\n            </form>\r\n            <ToastContainer />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default CrearColegio;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
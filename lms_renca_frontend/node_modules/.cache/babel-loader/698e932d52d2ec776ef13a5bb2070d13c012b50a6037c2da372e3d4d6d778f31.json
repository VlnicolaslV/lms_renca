{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import profesorService from'../../services/profesorService';import{Card,CardBody,CardTitle,CardText,Button,Form,FormGroup,Label,Input}from'reactstrap';import'./profesorCss/verForos.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VerForos=_ref=>{let{idCursoAsignatura,setSubSubSelectedOption}=_ref;const[foros,setForos]=useState([]);const[comentarios,setComentarios]=useState({});const[nuevoComentario,setNuevoComentario]=useState('');const[fechaCreacionComentario,setFechaCreacionComentario]=useState('');const navigate=useNavigate();useEffect(()=>{const fetchForos=async()=>{try{const forosData=await profesorService.obtenerForos(idCursoAsignatura);setForos(forosData);}catch(error){console.error(\"Error al obtener los foros:\",error);}};fetchForos();},[idCursoAsignatura]);const handleCrearForo=()=>{setSubSubSelectedOption('crearForo',idCursoAsignatura);};const handleVerComentarios=async idForo=>{try{const comentariosData=await profesorService.obtenerComentarios(idForo);setComentarios(prevComentarios=>({...prevComentarios,[idForo]:comentariosData}));}catch(error){console.error(\"Error al obtener los comentarios:\",error);}};const handleComentar=async idForo=>{if(!nuevoComentario||!fechaCreacionComentario)return;try{await profesorService.comentarForo(idForo,nuevoComentario,fechaCreacionComentario);setNuevoComentario('');setFechaCreacionComentario('');handleVerComentarios(idForo);}catch(error){console.error(\"Error al comentar en el foro:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"ver-foros-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Foros\"}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:handleCrearForo,style:{marginBottom:'20px'},children:\"Crear Foro\"}),/*#__PURE__*/_jsx(\"div\",{className:\"foros-grid\",children:foros.map(foro=>/*#__PURE__*/_jsx(Card,{className:\"foro-card\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(CardTitle,{tag:\"h5\",children:foro.titulo}),/*#__PURE__*/_jsx(CardText,{children:foro.tema}),/*#__PURE__*/_jsxs(CardText,{children:[\"Fecha de Creaci\\xF3n: \",new Date(foro.fecha_creacion).toLocaleDateString()]}),/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:()=>handleVerComentarios(foro.id),children:\"Ver Comentarios\"}),comentarios[foro.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"comentarios-section\",children:[comentarios[foro.id].map(comentario=>/*#__PURE__*/_jsxs(\"div\",{className:\"comentario\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[comentario.usuario_nombre,\" (\",comentario.usuario_rut,\"):\"]}),\" \",comentario.comentario]}),/*#__PURE__*/_jsx(\"p\",{className:\"fecha-comentario\",children:new Date(comentario.fecha_creacion).toLocaleDateString()})]},comentario.id)),/*#__PURE__*/_jsxs(Form,{onSubmit:e=>{e.preventDefault();handleComentar(foro.id);},children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"nuevoComentario\",children:\"Nuevo Comentario\"}),/*#__PURE__*/_jsx(Input,{type:\"textarea\",name:\"nuevoComentario\",id:\"nuevoComentario\",value:nuevoComentario,onChange:e=>setNuevoComentario(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"fechaCreacionComentario\",children:\"Fecha de Creaci\\xF3n del Comentario\"}),/*#__PURE__*/_jsx(Input,{type:\"date\",name:\"fechaCreacionComentario\",id:\"fechaCreacionComentario\",value:fechaCreacionComentario,onChange:e=>setFechaCreacionComentario(e.target.value),required:true})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",color:\"primary\",children:\"Comentar\"})]})]})]})},foro.id))})]});};export default VerForos;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","profesorService","Card","CardBody","CardTitle","CardText","Button","Form","FormGroup","Label","Input","jsx","_jsx","jsxs","_jsxs","VerForos","_ref","idCursoAsignatura","setSubSubSelectedOption","foros","setForos","comentarios","setComentarios","nuevoComentario","setNuevoComentario","fechaCreacionComentario","setFechaCreacionComentario","navigate","fetchForos","forosData","obtenerForos","error","console","handleCrearForo","handleVerComentarios","idForo","comentariosData","obtenerComentarios","prevComentarios","handleComentar","comentarForo","className","children","color","onClick","style","marginBottom","map","foro","tag","titulo","tema","Date","fecha_creacion","toLocaleDateString","id","comentario","usuario_nombre","usuario_rut","onSubmit","e","preventDefault","for","type","name","value","onChange","target","required"],"sources":["C:/Users/aggro/OneDrive/Desktop/Nueva carpeta (3)/LMS/lms_renca_frontend/src/components/profesor/VerForos.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport profesorService from '../../services/profesorService';\r\nimport { Card, CardBody, CardTitle, CardText, Button, Form, FormGroup, Label, Input } from 'reactstrap';\r\nimport './profesorCss/verForos.css';\r\n\r\nconst VerForos = ({ idCursoAsignatura, setSubSubSelectedOption }) => {\r\n    const [foros, setForos] = useState([]);\r\n    const [comentarios, setComentarios] = useState({});\r\n    const [nuevoComentario, setNuevoComentario] = useState('');\r\n    const [fechaCreacionComentario, setFechaCreacionComentario] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const fetchForos = async () => {\r\n            try {\r\n                const forosData = await profesorService.obtenerForos(idCursoAsignatura);\r\n                setForos(forosData);\r\n            } catch (error) {\r\n                console.error(\"Error al obtener los foros:\", error);\r\n            }\r\n        };\r\n\r\n        fetchForos();\r\n    }, [idCursoAsignatura]);\r\n\r\n    const handleCrearForo = () => {\r\n        setSubSubSelectedOption('crearForo', idCursoAsignatura);\r\n    };\r\n\r\n    const handleVerComentarios = async (idForo) => {\r\n        try {\r\n            const comentariosData = await profesorService.obtenerComentarios(idForo);\r\n            setComentarios((prevComentarios) => ({\r\n                ...prevComentarios,\r\n                [idForo]: comentariosData,\r\n            }));\r\n        } catch (error) {\r\n            console.error(\"Error al obtener los comentarios:\", error);\r\n        }\r\n    };\r\n\r\n    const handleComentar = async (idForo) => {\r\n        if (!nuevoComentario || !fechaCreacionComentario) return;\r\n\r\n        try {\r\n            await profesorService.comentarForo(idForo, nuevoComentario, fechaCreacionComentario);\r\n            setNuevoComentario('');\r\n            setFechaCreacionComentario('');\r\n            handleVerComentarios(idForo);\r\n        } catch (error) {\r\n            console.error(\"Error al comentar en el foro:\", error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"ver-foros-container\">\r\n            <h2>Foros</h2>\r\n            <Button color=\"primary\" onClick={handleCrearForo} style={{ marginBottom: '20px' }}>Crear Foro</Button>\r\n            <div className=\"foros-grid\">\r\n                {foros.map((foro) => (\r\n                    <Card key={foro.id} className=\"foro-card\">\r\n                        <CardBody>\r\n                            <CardTitle tag=\"h5\">{foro.titulo}</CardTitle>\r\n                            <CardText>{foro.tema}</CardText>\r\n                            <CardText>Fecha de Creación: {new Date(foro.fecha_creacion).toLocaleDateString()}</CardText>\r\n                            <Button color=\"secondary\" onClick={() => handleVerComentarios(foro.id)}>Ver Comentarios</Button>\r\n                            {comentarios[foro.id] && (\r\n                                <div className=\"comentarios-section\">\r\n                                    {comentarios[foro.id].map((comentario) => (\r\n                                        <div key={comentario.id} className=\"comentario\">\r\n                                            <p><strong>{comentario.usuario_nombre} ({comentario.usuario_rut}):</strong> {comentario.comentario}</p>\r\n                                            <p className=\"fecha-comentario\">{new Date(comentario.fecha_creacion).toLocaleDateString()}</p>\r\n                                        </div>\r\n                                    ))}\r\n                                    <Form onSubmit={(e) => { e.preventDefault(); handleComentar(foro.id); }}>\r\n                                        <FormGroup>\r\n                                            <Label for=\"nuevoComentario\">Nuevo Comentario</Label>\r\n                                            <Input\r\n                                                type=\"textarea\"\r\n                                                name=\"nuevoComentario\"\r\n                                                id=\"nuevoComentario\"\r\n                                                value={nuevoComentario}\r\n                                                onChange={(e) => setNuevoComentario(e.target.value)}\r\n                                                required\r\n                                            />\r\n                                        </FormGroup>\r\n                                        <FormGroup>\r\n                                            <Label for=\"fechaCreacionComentario\">Fecha de Creación del Comentario</Label>\r\n                                            <Input\r\n                                                type=\"date\"\r\n                                                name=\"fechaCreacionComentario\"\r\n                                                id=\"fechaCreacionComentario\"\r\n                                                value={fechaCreacionComentario}\r\n                                                onChange={(e) => setFechaCreacionComentario(e.target.value)}\r\n                                                required\r\n                                            />\r\n                                        </FormGroup>\r\n                                        <Button type=\"submit\" color=\"primary\">Comentar</Button>\r\n                                    </Form>\r\n                                </div>\r\n                            )}\r\n                        </CardBody>\r\n                    </Card>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VerForos;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useEffect,useState}from'react';import{EstudianteService}from'../../services/estudianteService';import'./estudianteCss/verForo.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const VerForo=_ref=>{let{asignaturaId}=_ref;const[foros,setForos]=useState([]);const[comentarios,setComentarios]=useState({});const[nuevoComentario,setNuevoComentario]=useState('');const[fechaCreacionComentario,setFechaCreacionComentario]=useState('');const[selectedForoId,setSelectedForoId]=useState(null);useEffect(()=>{const fetchForos=async()=>{try{const response=await EstudianteService.obtener_foros(asignaturaId);setForos(response);}catch(error){console.error(\"Error al obtener los foros:\",error);}};fetchForos();},[asignaturaId]);const fetchComentarios=async foroId=>{try{const response=await EstudianteService.obtener_comentarios(foroId);setComentarios(prev=>({...prev,[foroId]:response}));}catch(error){console.error(\"Error al obtener los comentarios:\",error);}};const handleForoClick=foroId=>{if(!comentarios[foroId]){fetchComentarios(foroId);}setSelectedForoId(foroId);};const handleComentar=async idForo=>{if(!nuevoComentario||!fechaCreacionComentario)return;try{await EstudianteService.comentar_foro(idForo,nuevoComentario,fechaCreacionComentario);setNuevoComentario('');setFechaCreacionComentario('');fetchComentarios(idForo);}catch(error){console.error(\"Error al comentar en el foro:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"ver-foro-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Foros de la Asignatura\"}),foros.map((foro,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"foro-card\",onClick:()=>handleForoClick(foro.id),children:[/*#__PURE__*/_jsx(\"h3\",{children:foro.titulo}),/*#__PURE__*/_jsx(\"p\",{children:foro.tema}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Creado en: \",new Date(foro.fecha_creacion).toLocaleDateString()]}),selectedForoId===foro.id&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comentarios-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Comentarios\"}),comentarios[foro.id]&&comentarios[foro.id].map((comentario,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"comentario-card\",children:[/*#__PURE__*/_jsx(\"p\",{children:comentario.comentario}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Autor: \",comentario.usuario_nombre,\" \",comentario.usuario_apellido]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Fecha: \",new Date(comentario.fecha_creacion).toLocaleDateString()]})]},index))]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleComentar(foro.id);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nuevoComentario\",children:\"Nuevo Comentario\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"nuevoComentario\",value:nuevoComentario,onChange:e=>setNuevoComentario(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fechaCreacionComentario\",children:\"Fecha de Creaci\\xF3n del Comentario\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"fechaCreacionComentario\",value:fechaCreacionComentario,onChange:e=>setFechaCreacionComentario(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Comentar\"})]})]})]},index))]});};export default VerForo;","map":{"version":3,"names":["React","useEffect","useState","EstudianteService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","VerForo","_ref","asignaturaId","foros","setForos","comentarios","setComentarios","nuevoComentario","setNuevoComentario","fechaCreacionComentario","setFechaCreacionComentario","selectedForoId","setSelectedForoId","fetchForos","response","obtener_foros","error","console","fetchComentarios","foroId","obtener_comentarios","prev","handleForoClick","handleComentar","idForo","comentar_foro","className","children","map","foro","index","onClick","id","titulo","tema","Date","fecha_creacion","toLocaleDateString","comentario","usuario_nombre","usuario_apellido","onSubmit","e","preventDefault","htmlFor","value","onChange","target","required","type"],"sources":["C:/Users/aggro/OneDrive/Desktop/Nueva carpeta (3)/LMS/lms_renca_frontend/src/components/estudiante/VerForo.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { EstudianteService } from '../../services/estudianteService';\r\nimport './estudianteCss/verForo.css';\r\n\r\nconst VerForo = ({ asignaturaId }) => {\r\n    const [foros, setForos] = useState([]);\r\n    const [comentarios, setComentarios] = useState({});\r\n    const [nuevoComentario, setNuevoComentario] = useState('');\r\n    const [fechaCreacionComentario, setFechaCreacionComentario] = useState('');\r\n    const [selectedForoId, setSelectedForoId] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchForos = async () => {\r\n            try {\r\n                const response = await EstudianteService.obtener_foros(asignaturaId);\r\n                setForos(response);\r\n            } catch (error) {\r\n                console.error(\"Error al obtener los foros:\", error);\r\n            }\r\n        };\r\n        fetchForos();\r\n    }, [asignaturaId]);\r\n\r\n    const fetchComentarios = async (foroId) => {\r\n        try {\r\n            const response = await EstudianteService.obtener_comentarios(foroId);\r\n            setComentarios((prev) => ({ ...prev, [foroId]: response }));\r\n        } catch (error) {\r\n            console.error(\"Error al obtener los comentarios:\", error);\r\n        }\r\n    };\r\n\r\n    const handleForoClick = (foroId) => {\r\n        if (!comentarios[foroId]) {\r\n            fetchComentarios(foroId);\r\n        }\r\n        setSelectedForoId(foroId);\r\n    };\r\n\r\n    const handleComentar = async (idForo) => {\r\n        if (!nuevoComentario || !fechaCreacionComentario) return;\r\n\r\n        try {\r\n            await EstudianteService.comentar_foro(idForo, nuevoComentario, fechaCreacionComentario);\r\n            setNuevoComentario('');\r\n            setFechaCreacionComentario('');\r\n            fetchComentarios(idForo);\r\n        } catch (error) {\r\n            console.error(\"Error al comentar en el foro:\", error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"ver-foro-container\">\r\n            <h2>Foros de la Asignatura</h2>\r\n            {foros.map((foro, index) => (\r\n                <div key={index} className=\"foro-card\" onClick={() => handleForoClick(foro.id)}>\r\n                    <h3>{foro.titulo}</h3>\r\n                    <p>{foro.tema}</p>\r\n                    <p>Creado en: {new Date(foro.fecha_creacion).toLocaleDateString()}</p>\r\n                    {selectedForoId === foro.id && (\r\n                        <>\r\n                            <div className=\"comentarios-container\">\r\n                                <h3>Comentarios</h3>\r\n                                {comentarios[foro.id] && comentarios[foro.id].map((comentario, index) => (\r\n                                    <div key={index} className=\"comentario-card\">\r\n                                        <p>{comentario.comentario}</p>\r\n                                        <p>Autor: {comentario.usuario_nombre} {comentario.usuario_apellido}</p>\r\n                                        <p>Fecha: {new Date(comentario.fecha_creacion).toLocaleDateString()}</p>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                            <form onSubmit={(e) => { e.preventDefault(); handleComentar(foro.id); }}>\r\n                                <div className=\"form-group\">\r\n                                    <label htmlFor=\"nuevoComentario\">Nuevo Comentario</label>\r\n                                    <textarea\r\n                                        id=\"nuevoComentario\"\r\n                                        value={nuevoComentario}\r\n                                        onChange={(e) => setNuevoComentario(e.target.value)}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div className=\"form-group\">\r\n                                    <label htmlFor=\"fechaCreacionComentario\">Fecha de Creaci√≥n del Comentario</label>\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        id=\"fechaCreacionComentario\"\r\n                                        value={fechaCreacionComentario}\r\n                                        onChange={(e) => setFechaCreacionComentario(e.target.value)}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <button type=\"submit\">Comentar</button>\r\n                            </form>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VerForo;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
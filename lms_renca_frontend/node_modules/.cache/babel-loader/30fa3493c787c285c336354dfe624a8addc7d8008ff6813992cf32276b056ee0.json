{"ast":null,"code":"import React,{useEffect,useState}from'react';import{EstudianteService}from'../../services/estudianteService';import SubirRespuesta from'./SubirRespuesta';import'./estudianteCss/verTareas.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VerTareas=_ref=>{let{asignaturaId,estudianteRut,onResponderTareaClick}=_ref;const[tareas,setTareas]=useState([]);const[respuestas,setRespuestas]=useState([]);const[showResponseForm,setShowResponseForm]=useState(false);const[selectedTareaId,setSelectedTareaId]=useState(null);useEffect(()=>{const fetchTareas=async()=>{try{if(!estudianteRut){throw new Error(\"El rut del estudiante es undefined\");}const tareasResponse=await EstudianteService.obtener_tareas(estudianteRut);setTareas(tareasResponse);const respuestasResponse=await EstudianteService.obtener_respuestas(estudianteRut);setRespuestas(respuestasResponse);}catch(error){console.error(\"Error al obtener tareas o respuestas:\",error);}};fetchTareas();},[estudianteRut]);const handleResponderTareaClick=tareaId=>{setSelectedTareaId(tareaId);setShowResponseForm(true);};const handleResponseSubmitted=()=>{setShowResponseForm(false);setSelectedTareaId(null);// Refresh tasks and responses\nconst fetchTareas=async()=>{const tareasResponse=await EstudianteService.obtener_tareas(estudianteRut);setTareas(tareasResponse);const respuestasResponse=await EstudianteService.obtener_respuestas(estudianteRut);setRespuestas(respuestasResponse);};fetchTareas();};const getRespuestasForTarea=tareaId=>{return respuestas.filter(respuesta=>respuesta.tarea===tareaId);};if(showResponseForm&&selectedTareaId){return/*#__PURE__*/_jsx(SubirRespuesta,{tareaId:selectedTareaId,estudianteRut:estudianteRut,onResponseSubmitted:handleResponseSubmitted});}if(!tareas.length){return/*#__PURE__*/_jsx(\"div\",{children:\"Cargando tareas...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"ver-tareas-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Tareas\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tareas-grid\",children:tareas.map((tarea,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"tarea-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:tarea.titulo}),/*#__PURE__*/_jsx(\"p\",{children:tarea.descripcion}),tarea.archivo&&/*#__PURE__*/_jsx(\"a\",{href:`http://localhost:8000/${tarea.archivo}`,download:true,children:\"Descargar Archivo\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Fecha de entrega: \",new Date(tarea.fecha_entrega).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleResponderTareaClick(tarea.id),children:\"Responder Tarea\"}),/*#__PURE__*/_jsx(\"div\",{className:\"respuestas\",children:getRespuestasForTarea(tarea.id).map((respuesta,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"respuesta\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Comentario:\"}),\" \",respuesta.comentario]}),respuesta.archivo_respuesta&&/*#__PURE__*/_jsx(\"a\",{href:`http://localhost:8000/${respuesta.archivo_respuesta}`,download:true,children:\"Descargar Respuesta\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Fecha de env\\xEDo:\"}),\" \",new Date(respuesta.fecha_envio).toLocaleDateString()]})]},index))})]},index))})]});};export default VerTareas;","map":{"version":3,"names":["React","useEffect","useState","EstudianteService","SubirRespuesta","jsx","_jsx","jsxs","_jsxs","VerTareas","_ref","asignaturaId","estudianteRut","onResponderTareaClick","tareas","setTareas","respuestas","setRespuestas","showResponseForm","setShowResponseForm","selectedTareaId","setSelectedTareaId","fetchTareas","Error","tareasResponse","obtener_tareas","respuestasResponse","obtener_respuestas","error","console","handleResponderTareaClick","tareaId","handleResponseSubmitted","getRespuestasForTarea","filter","respuesta","tarea","onResponseSubmitted","length","children","className","map","index","titulo","descripcion","archivo","href","download","Date","fecha_entrega","toLocaleDateString","onClick","id","comentario","archivo_respuesta","fecha_envio"],"sources":["C:/Users/aggro/OneDrive/Desktop/Nueva carpeta (3)/LMS/lms_renca_frontend/src/components/estudiante/VerTareas.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { EstudianteService } from '../../services/estudianteService';\r\nimport SubirRespuesta from './SubirRespuesta';\r\nimport './estudianteCss/verTareas.css';\r\n\r\nconst VerTareas = ({ asignaturaId, estudianteRut, onResponderTareaClick }) => {\r\n    const [tareas, setTareas] = useState([]);\r\n    const [respuestas, setRespuestas] = useState([]);\r\n    const [showResponseForm, setShowResponseForm] = useState(false);\r\n    const [selectedTareaId, setSelectedTareaId] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchTareas = async () => {\r\n            try {\r\n                if (!estudianteRut) {\r\n                    throw new Error(\"El rut del estudiante es undefined\");\r\n                }\r\n                const tareasResponse = await EstudianteService.obtener_tareas(estudianteRut);\r\n                setTareas(tareasResponse);\r\n\r\n                const respuestasResponse = await EstudianteService.obtener_respuestas(estudianteRut);\r\n                setRespuestas(respuestasResponse);\r\n            } catch (error) {\r\n                console.error(\"Error al obtener tareas o respuestas:\", error);\r\n            }\r\n        };\r\n        fetchTareas();\r\n    }, [estudianteRut]);\r\n\r\n    const handleResponderTareaClick = (tareaId) => {\r\n        setSelectedTareaId(tareaId);\r\n        setShowResponseForm(true);\r\n    };\r\n\r\n    const handleResponseSubmitted = () => {\r\n        setShowResponseForm(false);\r\n        setSelectedTareaId(null);\r\n        // Refresh tasks and responses\r\n        const fetchTareas = async () => {\r\n            const tareasResponse = await EstudianteService.obtener_tareas(estudianteRut);\r\n            setTareas(tareasResponse);\r\n\r\n            const respuestasResponse = await EstudianteService.obtener_respuestas(estudianteRut);\r\n            setRespuestas(respuestasResponse);\r\n        };\r\n        fetchTareas();\r\n    };\r\n\r\n    const getRespuestasForTarea = (tareaId) => {\r\n        return respuestas.filter(respuesta => respuesta.tarea === tareaId);\r\n    };\r\n\r\n    if (showResponseForm && selectedTareaId) {\r\n        return <SubirRespuesta tareaId={selectedTareaId} estudianteRut={estudianteRut} onResponseSubmitted={handleResponseSubmitted} />;\r\n    }\r\n\r\n    if (!tareas.length) {\r\n        return <div>Cargando tareas...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"ver-tareas-container\">\r\n            <h2>Tareas</h2>\r\n            <div className=\"tareas-grid\">\r\n                {tareas.map((tarea, index) => (\r\n                    <div key={index} className=\"tarea-card\">\r\n                        <h3>{tarea.titulo}</h3>\r\n                        <p>{tarea.descripcion}</p>\r\n                        {tarea.archivo && (\r\n                            <a href={`http://localhost:8000/${tarea.archivo}`} download>Descargar Archivo</a>\r\n                        )}\r\n                        <p>Fecha de entrega: {new Date(tarea.fecha_entrega).toLocaleDateString()}</p>\r\n                        <button onClick={() => handleResponderTareaClick(tarea.id)}>Responder Tarea</button>\r\n                        <div className=\"respuestas\">\r\n                            {getRespuestasForTarea(tarea.id).map((respuesta, index) => (\r\n                                <div key={index} className=\"respuesta\">\r\n                                    <p><strong>Comentario:</strong> {respuesta.comentario}</p>\r\n                                    {respuesta.archivo_respuesta && (\r\n                                        <a href={`http://localhost:8000/${respuesta.archivo_respuesta}`} download>Descargar Respuesta</a>\r\n                                    )}\r\n                                    <p><strong>Fecha de env√≠o:</strong> {new Date(respuesta.fecha_envio).toLocaleDateString()}</p>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VerTareas;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}